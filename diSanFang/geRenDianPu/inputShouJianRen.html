<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <!--IE=edge表示强制使用IE最新内核，chrome=1表示如果安装了针对IE6/7/8等版本的浏览器插件Google Chrome -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <title>知妈树</title>
    <link rel="stylesheet" href="../../css/bootstrap.css"/>
    <link rel="stylesheet" href="../../fonts/iconfont.css"/>
    <link rel="stylesheet" href="../../css/style.css"/>
</head>
<body>
<div class="myOrder_content">
    <a href="#">
        <div class="myOrder_shopBox">
            <div class="imgBox">
                <img src="../../images/img/cart-img1.png" alt=""/>
            </div>
            <div class="myOrder_shopDemo">
                <div class="myOrder_shopName">
                    南极人一体模杯内衣喂奶母乳全罩杯纯棉前开扣式无钢圈哺乳文胸
                </div>
                <div class="bottom">
                    <div class="bottom1">
                        <span class="fh">￥</span><span class="num">39.00</span>
                    </div>
                </div>
            </div>
        </div>
    </a>
</div>
<article class="inputShouJianRenMain">
    <section>
        <div class="inputShouJianRenTT">
            <div>
                收件人1
            </div>
            <div>
                <i class="icon iconfont delShouJianRen">&#xe62c;</i>
            </div>
        </div>
        <div class="inputShouJianRenContent">
            <div class="inputShouJianRenContentItem">
                <img src="../../images/icon-img/shouJianRen_shou.png" alt=""/><input type="text" placeholder="填写收件人姓名"/>
            </div>
            <div class="inputShouJianRenContentItem">
                <input type="text" placeholder="填写收件人电话"/>
            </div>
            <div class="inputShouJianRenContentItem">
                <input type="text" placeholder="填写收件人地址"/>
            </div>
            <div class="shopDetailSelectRuleItem">
                <div>灰色 L</div>
                <div class="shopDetailSelectRuleNum">
                    <span class="sub">-</span><span class="num">1</span><span class="add">+</span>
                </div>
            </div>
            <div class="shopDetailSelectRuleItem">
                <div>白色 M</div>
                <div class="shopDetailSelectRuleNum">
                    <span class="sub">-</span><span class="num">1</span><span class="add">+</span>
                </div>
            </div>
            <div class="inputShouJianRenXiaoJi">
                <div>运费:全场包邮</div>
                <div>
                    小计:<span class="fh">￥</span><span class="xj">78.00</span>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="inputShouJianRenTT">
            <div>收件人2</div><div><i class="icon iconfont delShouJianRen">&#xe62c;</i></div>
        </div>
        <div class="inputShouJianRenContent">
            <div class="inputShouJianRenContentItem">
                <img src="../../images/icon-img/shouJianRen_shou.png" alt=""/><input type="text" placeholder="填写收件人姓名"/>
            </div>
            <div class="inputShouJianRenContentItem">
                <input type="text" placeholder="填写收件人电话"/>
            </div>
            <div class="inputShouJianRenContentItem">
                <input type="text" placeholder="填写收件人地址"/>
            </div>
            <div class="shopDetailSelectRuleItem">
                <div>灰色 L</div>
                <div class="shopDetailSelectRuleNum">
                    <span class="sub">-</span><span class="num">1</span><span class="add">+</span>
                </div>
            </div>
            <div class="shopDetailSelectRuleItem">
                <div>白色 M</div>
                <div class="shopDetailSelectRuleNum">
                    <span class="sub">-</span><span class="num">1</span><span class="add">+</span>
                </div>
            </div>
            <div class="inputShouJianRenXiaoJi">
                <div>运费:全场包邮</div><div>小计:<span class="fh">￥</span><span class="xj">78.00</span></div>
            </div>
        </div>
    </section>
</article>
<div class="inputShouJianRen_tjxlrBox">
    <div class="tjxlr">添加新联系人</div>
</div>
<!--留白-->
<div class="empty"></div>
<div class="shopDetailFooter">
    <div class="shopDetailFooter_left">
        <span class="js">2</span>件（包邮）
    </div>
    <div class="shopDetailFooter_right">
        <div class="shopDetailFooter_right_1">
            总价: <span class="fh">￥</span><span class="zj">78.00</span>
        </div>
        <div class="shopDetailFooter_right_2">
            <a href="jieSuanYeMian.html" class="confirm">提交订单</a>
        </div>
    </div>
</div>
<!--确认删除联系人-->
<div class="grey"></div>
<div class="dialog-main">
    <div class="dialog-pout">

    </div>
    <div class="dialog-confirm clearfloat">
        <div class="f left">否</div>
        <div class="t left">是</div>
    </div>
</div>
<!--引入JS文件-->
<script src="../../js/jquery.min.js"></script>
<script src="../../js/font.js"></script>
<script>
    $(function(){
        var $index;
        $("a.confirm").on("click",function(){
            if($(".shr").val() == ""){//判断收货人是否输入正确
                $(".shr").val("!填写正确的收件人姓名、电话、地址");
                $(".shr").css({color:"#ff3333"});
            }else{
                alert("ok");
            }
        });
        $(".inputShouJianRenMain").on("click",".delShouJianRen",function(){
            $index = $(this).parents("section").index();
            $(".grey").show();
            $(".dialog-main").show();
            $(".dialog-pout").text("确定要删除收件人"+($index+1));
        });
        $(".grey").on("click",function(){
            $(this).hide();
            $(".dialog-main").hide();
        });
        $(".f").on("click",function(){
            $(".grey").hide();
            $(".dialog-main").hide();
        });
        $(".t").on("click",function(){
            $(".grey").hide();
            $(".dialog-main").hide();
            $(".inputShouJianRenMain section").eq($index).remove();
//            console.log($(".inputShouJianRenMain section").length);
            for(var i = 0; i<$(".inputShouJianRenMain section").length;i++){
                $(".inputShouJianRenMain section").eq(i).find(".inputShouJianRenTT>div:first-child").text("收件人"+(i+1));
            }
            off_hide();
        });
        function off_hide(){//是否隐藏删除联系人
            if($(".inputShouJianRenMain section").length>1){
                $(".delShouJianRen").show();
            }else{
                $(".delShouJianRen").hide();
            }
        }
        off_hide();
        //添加联系人
        $(".tjxlr").on("click",function(){
            var s_len = $(".inputShouJianRenMain section").length;
            $(".inputShouJianRenMain").append(
                '<section>'+
                '<div class="inputShouJianRenTT">'+
                '<div>收件人'+(s_len+1)+'</div>'+
                '<div><i class="icon iconfont delShouJianRen">&#xe62c;</i></div>'+
                '</div>'+
                '<div class="inputShouJianRenContent">'+
                '<div class="inputShouJianRenContentItem"><img src="../../images/icon-img/shouJianRen_shou.png" alt=""/><input type="text" placeholder="填写收件人姓名"/></div>'+
                '<div class="inputShouJianRenContentItem"><input type="text" placeholder="填写收件人电话"/></div>'+
                '<div class="inputShouJianRenContentItem"><input type="text" placeholder="填写收件人地址"/></div>'+
                '<div class="shopDetailSelectRuleItem">'+
                '<div>灰色 L</div>'+
                '<div class="shopDetailSelectRuleNum"><span class="sub">-</span><span class="num">0</span><span class="add">+</span></div>'+
                '</div>'+
                '<div class="shopDetailSelectRuleItem">'+
                '<div>白色 M</div>'+
                '<div class="shopDetailSelectRuleNum"><span class="sub">-</span><span class="num">0</span><span class="add">+</span></div>'+
                '</div>'+
                '<div class="inputShouJianRenXiaoJi">'+
                '<div>运费:全场包邮</div>'+
                '<div>小计:<span class="fh">￥</span><span class="xj">78.00</span></div>'+
                '</div>'+
                '</div>'+
                '</section>'
            );
        });
        var $maxNum = 9;
        $("span.sub").on("click",function(){
            var $num = $(this).siblings("span.num").text();
            if($num>0){
                $num--;
                $(this).siblings("span.num").text($num);
            }else{
                return false;
            }
        });
        $("span.add").on("click",function(){
            var $num = $(this).siblings("span.num").text();
            if($num<$maxNum){
                $num++;
                $(this).siblings("span.num").text($num);
            }else{
                return false;
            }
            t_shopNum();
        });
        //计算商品的总件数
        function t_shopNum(){//计算商品的总件数
            var t_num = 0;
            for(var i=0;i<$(".inputShouJianRenMain .num").length;i++){
                t_num += parseInt($(".inputShouJianRenMain .num").eq(i).text());
            }
            $(".shopDetailFooter_left span.js").text(t_num);
        }
        t_shopNum();//加载时执行一次
        function t_shopPrice(){//计算商品的总价
            var t_money = 0;
            for(var i=0;i<$(".inputShouJianRenMain .xj").length;i++){
                t_money += parseInt($(".inputShouJianRenMain .xj").eq(i).text());
            }
            $(".shopDetailFooter_right_1 span.zj").text(t_money+".00");
        }
        t_shopPrice();//加载时执行一次
    })
</script>
</body>
</html>